<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Introduction</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/randomseed.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Phone-number</span> <span class="project-version">3.23-0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="10_introduction.html"><div class="inner"><span>Introduction</span></div></a></li><li class="depth-1 "><a href="30_specs.html"><div class="inner"><span>Specs and checks</span></div></a></li><li class="depth-1 "><a href="40_development.html"><div class="inner"><span>Development</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><a href="phone-number.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>phone-number</span></div></a></li><li class="depth-2 branch"><a href="phone-number.calling-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>calling-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="phone-number.cost.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cost</span></div></a></li><li class="depth-2 branch"><a href="phone-number.country-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>country-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="phone-number.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-2 branch"><a href="phone-number.leniency.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>leniency</span></div></a></li><li class="depth-2 branch"><a href="phone-number.locale.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>locale</span></div></a></li><li class="depth-2 branch"><a href="phone-number.match.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>match</span></div></a></li><li class="depth-2 branch"><a href="phone-number.net-code.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net-code</span></div></a></li><li class="depth-2 branch"><a href="phone-number.region.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>region</span></div></a></li><li class="depth-2 branch"><a href="phone-number.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li><li class="depth-2 branch"><a href="phone-number.tz-format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tz-format</span></div></a></li><li class="depth-2"><a href="phone-number.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#introduction" id="introduction"></a>Introduction</h1>
<p><a href="https://clojars.org/io.randomseed/phone-number"><img src="https://img.shields.io/clojars/v/io.randomseed/phone-number.svg" alt="Phone-number on Clojars" /></a> <a href="https://cljdoc.org/d/io.randomseed/phone-number/CURRENT"><img src="https://cljdoc.org/badge/io.randomseed/phone-number" alt="Phone-number on cljdoc" /></a> <a href="https://circleci.com/gh/randomseed-io/phone-number"><img src="https://circleci.com/gh/randomseed-io/phone-number.svg?style=svg" alt="CircleCI" /></a></p>
<p>Clojure library which uses Google’s Libphonenumber to validate, inspect and generate phone numbers.</p>
<h2><a href="#features" id="features"></a>Features</h2>
<ul>
<li>
<p>Polymorphic interface (phone numbers can be expressed as numbers, strings, <code>PhoneNumber</code> objects or maps).</p>
</li>
<li>
<p>Supported operations: creation, validation, generation, matching, string-searching, formatting, specification testing and properties reporting.</p>
</li>
<li>
<p>Promotes keyword-indexed maps with namespace inference (e.g. key can be <code>:phone-number/type</code> or just <code>:type</code>, type can be <code>:phone-number.type/mobile</code> or just <code>:mobile</code>).</p>
</li>
<li>
<p>Uses lazily evaluated map values to store phone number information during text-searching and samples generation.</p>
</li>
<li>
<p>Provides specs with generators.</p>
</li>
</ul>
<h2><a href="#caveats" id="caveats"></a>Caveats</h2>
<p>If your program processes a lot of phone numbers and your strategy is to keep them in a native format (a result of calling <code>phone-number.core/number</code>) then be aware that by default all <code>PhoneNumber</code> objects created will have raw input stored internally. This will affect <strong>comparison</strong> in a way that the object representing a number <code>+442920183133</code> will <strong>not be equal</strong> to the object representing the same number but with spaces (<code>+44 2920 183 133</code>). This is due to equality test based on, among others, raw input values which are used to generate the hash code of each object.</p>
<p>To work around that you have 2 choices:</p>
<ul>
<li>Use <code>phone-number.core/number-noraw</code> on input data to parse numbers without preserving raw inputs.</li>
<li>Use <code>phone-number.core/number-noraw</code> on existing objects to create raw-input-free copies.</li>
</ul>
<p>Optionally, <code>phone-number.core/number-optraw</code> may be used too, specifically in processing pipelines, in order to preserve raw input only when a created object is initialized with the existing one (an instance of <code>PhoneNumber</code>). In case of other argument types the protocol method behaves like <code>number-noraw</code>.</p>
<h2><a href="#sneak-peeks" id="sneak-peeks"></a>Sneak peeks</h2>
<ul>
<li>It <strong>shows information</strong> about phone numbers:</li>
</ul>
<pre><code class="language-clojure">(require '[phone-number.core :as phone])

;; region taken from a phone number
;; using system's default locale

(phone/info "+44 29 2018 3133")

{:phone-number/country-code               44,
 :phone-number/dialing-region             :phone-number.region/gb,
 :phone-number.dialing-region/defaulted?  false,
 :phone-number.dialing-region/derived?    true,
 :phone-number.dialing-region/valid-for?  true,
 :phone-number/geographical?              true,
 :phone-number/location                   "Cardiff",
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/gb,
 :phone-number/type                       :phone-number.type/fixed-line,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+442920183133",
 :phone-number.format/international       "+44 29 2018 3133",
 :phone-number.format/national            "029 2018 3133",
 :phone-number.format/raw-input           "+44 29 2018 3133",
 :phone-number.format/rfc3966             "tel:+44-29-2018-3133",
 :phone-number.tz-format/full-standalone  '("Greenwich Mean Time"),
 :phone-number.tz-format/id               '("Europe/London"),
 :phone-number.tz-format/short-standalone '("GMT"),
 :phone.number.short/possible?            false,
 :phone.number.short/valid?               false}

;; region passed as an argument
;; locale setting passed as an argument

(phone/info "601 100 601" :pl :pl)

{:phone-number/country-code               48,
 :phone-number/carrier                    "Plus",
 :phone-number/dialing-region             :phone-number.region/pl,
 :phone-number.dialing-region/defaulted?  false,
 :phone-number.dialing-region/derived?    true,
 :phone-number.dialing-region/valid-for?  true,
 :phone-number/geographical?              false,
 :phone-number/location                   "Polska",
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/pl,
 :phone-number/type                       :phone-number.type/mobile,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+48601100601",
 :phone-number.format/international       "+48 601 100 601",
 :phone-number.format/national            "601 100 601",
 :phone-number.format/raw-input           "601 100 601",
 :phone-number.format/rfc3966             "tel:+48-601-100-601",
 :phone-number.tz-format/full-standalone  '("Czas środkowoeuropejski"),
 :phone-number.tz-format/id               '("Europe/Warsaw"),
 :phone-number.tz-format/short-standalone '("CET"),
 :phone.number.short/possible?            false,
 :phone.number.short/valid?               false}

(phone/info "8081 570001" :gb :en)

{:phone-number/country-code               44,
 :phone-number/dialing-region             :phone-number.region/gb,
 :phone-number.dialing-region/defaulted?  false,
 :phone-number.dialing-region/derived?    true,
 :phone-number.dialing-region/valid-for?  true,
 :phone-number/geographical?              false,
 :phone-number/possible?                  true,
 :phone-number/region                     :phone-number.region/gb,
 :phone-number/type                       :phone-number.type/toll-free,
 :phone-number/valid?                     true,
 :phone-number.format/e164                "+448081570001",
 :phone-number.format/international       "+44 808 157 0001",
 :phone-number.format/national            "0808 157 0001",
 :phone-number.format/raw-input           "8081 570001",
 :phone-number.format/rfc3966             "tel:+44-808-157-0001",
 :phone-number.tz-format/full-standalone  '("Greenwich Mean Time" "British Time"),
 :phone-number.tz-format/id               '("Europe/Guernsey"
                                            "Europe/Isle_of_Man"
                                            "Europe/Jersey"
                                            "Europe/London"),
 :phone-number.tz-format/short-standalone  '("GMT" "BT"),
 :phone.number.short/possible?             false,
 :phone.number.short/valid?                false}
</code></pre>
<ul>
<li>It <strong>validates</strong> phone numbers:</li>
</ul>
<pre><code class="language-clojure">(require '[phone-number.core :as phone])

(phone/valid? 8081570001 :gb)      ; =&gt; true
(phone/valid? "+448081570001")     ; =&gt; true
(phone/valid? 8081570001 :pl)      ; =&gt; false
(phone/valid? "8081570001")        ; =&gt; false

(phone/possible? "8081570001")     ; =&gt; false
(phone/possible? "8081570001" :gb) ; =&gt; true
(phone/possible? "8081570001" :pl) ; =&gt; true
</code></pre>
<ul>
<li>It <strong>searches</strong> for phone numbers in text (recommended: stable options-map API):</li>
</ul>
<pre><code class="language-clojure">(require '[phone-number.core :as phone])

(-&gt;&gt; (phone/find-numbers-opts "Call me at +44 808 157 0001!" {:region-code :gb
                                                              :leniency    :valid
                                                              :max-tries   1})
     first
     (into {}) ;; materialize lazy-map (also forces :phone-number/info)
     (dissoc :phone-number/number))

;; If you don’t want the info map to be generated at all:
(-&gt;&gt; (phone/find-numbers-opts "Call me at +44 808 157 0001!" {:region-code :gb
                                                              :max-tries   1
                                                              :locale-specification false})
     first
     (into {})
     (dissoc :phone-number/number))
</code></pre>
<ul>
<li>It gives known phone number <strong>formats</strong> and <strong>types</strong>:</li>
</ul>
<pre><code class="language-clojure">(require '[phone-number.core :as phone])

phone/formats

#{:phone-number.format/e164
  :phone-number.format/international
  :phone-number.format/national
  :phone-number.format/raw-input
  :phone-number.format/rfc3966}

phone/types

#{:phone-number.type/fixed-line
  :phone-number.type/fixed-line-or-mobile
  :phone-number.type/mobile
  :phone-number.type/pager
  :phone-number.type/personal
  :phone-number.type/premium-rate
  :phone-number.type/shared-cost
  :phone-number.type/toll-free
  :phone-number.type/uan
  :phone-number.type/unknown
  :phone-number.type/voicemail
  :phone-number.type/voip}
</code></pre>
<ul>
<li>It <strong>generates</strong> phone numbers:</li>
</ul>
<pre><code class="language-clojure">(phone/generate)

{:phone-number/info
    {:phone-number/country-code              213,
     :phone-number/geographical?             false,
     :phone-number/possible?                 true,
     :phone-number/region                    :phone-number.region/dz,
     :phone-number/type                      :phone-number.type/unknown,
     :phone-number/valid?                    false,
     :phone-number/dialing-region            :phone-number.region/dz,
     :phone-number.dialing-region/defaulted? false,
     :phone-number.dialing-region/derived?   true,
     :phone-number.dialing-region/valid-for? false,
     :phone-number.format/e164               "+213181525997",
     :phone-number.format/international      "+213 181525997",
     :phone-number.format/national           "181525997",
     :phone-number.format/rfc3966            "tel:+213-181525997",
     :phone.number.short/possible?           false,
     :phone.number.short/valid?              false},
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@3edea9e6&gt;,
 :phone-number.sample/digits      ["+213" nil "181525997"],
 :phone-number.sample/hits        10,
 :phone-number.sample/max-samples 1000,
 :phone-number.sample/random-seed 7521527664400716800,
 :phone-number.sample/samples     11}

(require [phone-number.spec       :as spec]
         [clojure.spec.alpha      :as    s]
         [clojure.spec.gen.alpha  :as  gen])

(gen/generate (s/gen :phone-number/valid))

{:phone-number/info   #delay[{:status :pending, :val nil} 0x3810d15d],
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@79cc08fb&gt;,
 :phone-number.sample/digits      ["+7" nil "937627908"],
 :phone-number.sample/hits        11,
 :phone-number.sample/max-samples 150,
 :phone-number.sample/random-seed 7581363778716192180,
 :phone-number.sample/samples     27}

(gen/generate (s/gen (s/and :phone-number/possible :phone-number/invalid)))

{:phone-number/info    #delay[{:status :pending, :val nil} 0x41c0e225],
 :phone-number/number #&lt;com.google.i18n.phonenumbers.Phonenumber$PhoneNumber@36a74c18&gt;,
 :phone-number.sample/digits      ["+84" nil "0270454"],
 :phone-number.sample/hits        8,
 :phone-number.sample/max-samples 200,
 :phone-number.sample/random-seed -9105741821593959780,
 :phone-number.sample/samples     12}
</code></pre>
<p>And more…</p>
<h2><a href="#installation" id="installation"></a>Installation</h2>
<p>To use phone-number in your project, add the following to dependencies section of <code>project.clj</code> or <code>build.boot</code>:</p>
<pre><code class="language-clojure">[io.randomseed/phone-number "3.23-0"]
</code></pre>
<p>For <code>deps.edn</code> add the following as an element of a map under <code>:deps</code> or <code>:extra-deps</code> key:</p>
<pre><code class="language-clojure">io.randomseed/phone-number {:mvn/version "3.23-0"}
</code></pre>
<p>Additionally, if you want to utilize specs and generators provided by the phone-number you can use (in your development profile):</p>
<pre><code class="language-clojure">org.clojure/spec.alpha {:mvn/version "0.2.194"}
org.clojure/test.check {:mvn/version "1.1.1"}
</code></pre>
<p>You can also download JAR from <a href="https://clojars.org/io.randomseed/phone-number">Clojars</a>.</p>
<h2><a href="#documentation" id="documentation"></a>Documentation</h2>
<p>Full documentation including usage examples is available at:</p>
<ul>
<li><a href="https://randomseed.io/software/phone-number/">https://randomseed.io/software/phone-number/</a></li>
</ul>
<h2><a href="#license" id="license"></a>License</h2>
<p>Copyright © 2020–2023 Paweł Wilk</p>
<p>Phone-number is copyrighted software owned by Paweł Wilk (<a href="mailto:pw@gnu.org">pw@gnu.org</a>). You may redistribute and/or modify this software as long as you comply with the terms of the <a href="https://github.com/randomseed-io/phone-number/blob/master/LICENSE">GNU Lesser General Public License</a> (version 3).</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2><a href="#development" id="development"></a>Development</h2>
<p><a href="https://circleci.com/gh/randomseed-io/phone-number"><img src="https://circleci.com/gh/randomseed-io/phone-number.svg?style=svg" alt="CircleCI" /></a></p>
<h3><a href="#building-docs" id="building-docs"></a>Building docs</h3>
<pre><code class="language-bash">make docs
</code></pre>
<h3><a href="#building-jar" id="building-jar"></a>Building JAR</h3>
<pre><code class="language-bash">make jar
</code></pre>
<h3><a href="#rebuilding-pom" id="rebuilding-pom"></a>Rebuilding POM</h3>
<pre><code class="language-bash">make pom
</code></pre>
<h3><a href="#signing-pom" id="signing-pom"></a>Signing POM</h3>
<pre><code class="language-bash">make sig
</code></pre>
<h3><a href="#deploying-to-clojars" id="deploying-to-clojars"></a>Deploying to Clojars</h3>
<pre><code class="language-bash">make deploy
</code></pre>
<h3><a href="#interactive-development" id="interactive-development"></a>Interactive development</h3>
<pre><code class="language-bash">bin/repl
</code></pre>
<p>Starts REPL and nREPL server (port number is stored in <code>.nrepl-port</code>).</p>
</div></div></div></body></html>